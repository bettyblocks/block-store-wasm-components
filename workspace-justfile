fetch_wit_deps:
	wkg wit fetch

# mv will return a non-zero exit code if the file it is trying to move already exists and it is the same file.
# We surpress it here as this is not an error in our case.
move_wasm_to_root: 
	mv ./target/wasm32-wasip2/release/*.wasm . 2> /dev/null || exit 0

build: fetch_wit_deps
	cargo build --release --target wasm32-wasip2
	just move_wasm_to_root

test: 
	cargo test

format:
	cargo fmt

format-check:
	cargo fmt --check

quality-check:
	cargo clippy

clean:
	cargo clean
